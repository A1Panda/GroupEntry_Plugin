# 群组邀请管理插件

一个适用于 Yunzai-Bot 的高安全性群组邀请管理插件，支持灵活配置、锅巴面板可视化管理，适合多群机器人场景下的加群审核与风控。

---

## 功能亮点

- **加群请求需审核**：机器人被邀请进群时，需邀请者、群主或管理员在群内"引用通知消息"并发送 `#确认加群` 或 `#拒绝加群`，方可处理。
- **多群支持**：可配置多个管理群，灵活启用/禁用。
- **请求过期自动清理**：加群请求有自定义时效，超时自动失效，防止积压。
- **私聊通知邀请人**：加群请求被处理后，自动私聊通知邀请人处理结果。
- **锅巴面板可视化配置**：支持通过锅巴面板管理群组、设置请求过期时间、最大待处理数等。
- **配置热更新与兼容**：支持自动合并新配置项，升级无忧。
- **详细日志与错误提示**：便于排查和维护。

---

## 安装方法

1. 将 `GroupEntry_Plugin` 文件夹放入 Yunzai-Bot 的 `plugins` 目录下。
2. 重启 Yunzai-Bot 或发送 `#群组邀请更新` 命令。
3. （可选）通过锅巴面板进行可视化配置。

---

## 配置说明

插件配置文件位于 `config/config.json`，默认配置参考 `config/defaultConfig.json`。

**主要配置项：**
```json
{
  "groups": [
    {
      "groupId": 123456789,
      "groupName": "示例群",
      "isEnabled": true
    }
  ],
  "pendingRequests": [],
  "requestExpireMinutes": 5,   // 加群请求过期时间（分钟，可自定义）
  "maxPendingRequests": 20      // 最大待处理请求数（可自定义）
}
```

- `groups`：管理的群组列表，可多选。
- `isEnabled`：是否启用该群组的加群管理。
- `requestExpireMinutes`：加群请求的过期时间，超时自动失效。
- `maxPendingRequests`：最多同时存在的待处理加群请求数。

**配置自动合并**：升级插件或增加新字段时，用户配置会自动补全，无需手动修改。

---

## 锅巴面板支持

- 群组列表可视化增删改
- 过期时间、最大请求数可视化设置
- 支持热更新与保存
- 字段说明清晰，界面简洁美观

---

## 使用流程

1. **邀请机器人进群**
2. 机器人在目标群发送加群请求通知
3. 邀请者、群主或管理员"引用"该通知消息并回复 `#确认加群` 或 `#拒绝加群`
4. 机器人自动处理请求，并私聊通知邀请人结果
5. 超时未处理的请求自动失效

---

## 常见问题与建议

- **Q: 配置项升级后会不会丢失？**
  - A: 不会，插件自动合并新字段，老用户无需手动修改 config.json。
- **Q: 锅巴面板保存后配置不生效？**
  - A: 请刷新页面或重启 Yunzai-Bot。
- **Q: 如何只允许部分群管理？**
  - A: 只需在 `groups` 中启用对应群组即可。
- **Q: 支持多机器人多群场景吗？**
  - A: 完全支持。

---

## 更新与维护

- 支持 `#群组邀请更新`、`#群组邀请强制更新`、`#群组邀请更新日志` 等命令一键升级插件
- 建议将 `config/config.json`、`config/defaultConfig.json` 加入 `.gitignore`，避免敏感信息泄露
- 日志详细，便于排查问题

---

## 贡献与反馈

- 作者：[@A1_Pa](https://github.com/A1_Pa)
- 插件主页：[GitHub](https://github.com/A1_Pa/GroupEntry_Plugin)
- 欢迎 issue、PR、建议与交流！ 